var u=Object.create;var o=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var i in t)o(e,i,{get:t[i],enumerable:!0})},l=(e,t,i,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of f(t))!S.call(e,s)&&s!==i&&o(e,s,{get:()=>t[s],enumerable:!(a=P(t,s))||a.enumerable});return e};var c=(e,t,i)=>(i=e!=null?u(w(e)):{},l(t||!e||!e.__esModule?o(i,"default",{value:e,enumerable:!0}):i,e)),y=e=>l(o({},"__esModule",{value:!0}),e);var F={};m(F,{default:()=>r});module.exports=y(F);var n=require("obsidian"),g=c(require("fs")),d=c(require("path")),A={pointerFilePath:".obsidian/active-note.txt"},r=class extends n.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new h(this.app,this)),this.registerEvent(this.app.workspace.on("active-leaf-change",t=>{var p;let i=(p=t==null?void 0:t.view)==null?void 0:p.file;if(!i)return;let a=this.app.vault.adapter.getBasePath(),s=d.join(a,this.settings.pointerFilePath);try{g.writeFileSync(s,i.path,"utf8")}catch(v){console.error("Active Note plugin failed to write pointer file",v)}}))}async loadSettings(){this.settings=Object.assign({},A,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},h=class extends n.PluginSettingTab{constructor(t,i){super(t,i),this.plugin=i}display(){let{containerEl:t}=this;t.empty(),new n.Setting(t).setName("Pointer file path").setDesc("Relative path from vault root where the active note path is written").addText(i=>i.setPlaceholder(".obsidian/active-note.txt").setValue(this.plugin.settings.pointerFilePath).onChange(async a=>{this.plugin.settings.pointerFilePath=a,await this.plugin.saveSettings()}))}};
